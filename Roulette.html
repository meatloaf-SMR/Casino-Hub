<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Roulette</title>
<style>
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  }

  body {
    background: radial-gradient(circle at top, #0b1924 0, #02070b 60%, #000 100%);
    color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
  }

  .table {
    background: radial-gradient(circle at center, #14542b 0, #064020 55%, #02200b 100%);
    border-radius: 20px;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.75);
    padding: 20px;
    width: 100%;
    max-width: 1100px;
    border: 4px solid #c4a15a;
    position: relative;
    color: #f4f4f4;
  }

  .table::before {
    content: "ROULETTE";
    position: absolute;
    top: 12px;
    left: 50%;
    transform: translateX(-50%);
    color: rgba(250, 245, 210, 0.2);
    font-size: 26px;
    letter-spacing: 10px;
    font-weight: 700;
  }

  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding: 0 5px;
    font-size: 14px;
  }

  .bankroll span {
    font-weight: 700;
    color: #f7e9a0;
  }

  .center-info {
    opacity: 0.85;
    text-align: center;
  }

  .chip-select span {
    margin-right: 8px;
  }

  .chip {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    margin-left: 4px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 700;
    border: 2px solid rgba(0,0,0,0.65);
    box-shadow: 0 3px 0 rgba(0,0,0,0.6);
    background: radial-gradient(circle at top, #f9d675, #d8a73e);
    color: #111;
    transition: transform 0.05s ease, box-shadow 0.05s ease, filter 0.15s ease;
  }

  .chip.active {
    box-shadow: 0 0 0 rgba(0,0,0,0.6);
    transform: translateY(2px);
  }

  .layout-wrapper {
    display: flex;
    gap: 20px;
    margin-top: 10px;
    flex-wrap: wrap;
  }

  .wheel-area {
    flex: 0 0 280px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .wheel {
    width: 260px;
    height: 260px;
    border-radius: 50%;
    background: radial-gradient(circle at center, #3a1708 0, #1d0902 45%, #000 100%);
    box-shadow: 0 0 15px rgba(0,0,0,0.8);
    position: relative;
    margin-bottom: 10px;
  }

  .wheel-inner {
    position: absolute;
    inset: 18px;
    border-radius: 50%;
    background: radial-gradient(circle at center, #0b3b13 0, #041d0b 70%);
    border: 4px solid #c4a15a;
  }

  .wheel-number-ring {
    position: absolute;
    inset: 0;
  }

  .wheel-number {
    position: absolute;
    width: 50%;
    height: 16px;
    left: 50%;
    top: 50%;
    transform-origin: 0% 50%;
    font-size: 10px;
    font-weight: 700;
    text-align: right;
    padding-right: 6px;
  }

  .wheel-number.red {
    color: #ff6b6b;
  }

  .wheel-number.black {
    color: #f4f4f4;
  }

  .wheel-number.green {
    color: #7bff9f;
  }

  .ball {
    position: absolute;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #fff, #ddd);
    box-shadow: 0 0 5px rgba(0,0,0,0.8);
  }

  .betting-layout {
    flex: 1;
    min-width: 520px;
    background: rgba(0,0,0,0.15);
    border-radius: 16px;
    padding: 10px;
    border: 2px solid rgba(0,0,0,0.4);
  }

  .grid {
    display: grid;
    grid-template-columns: 60px repeat(12, 1fr);
    grid-auto-rows: 40px;
    gap: 2px;
  }

  .cell {
    border-radius: 6px;
    border: 1px solid rgba(255,255,255,0.12);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }

  .cell.zero {
    grid-row: 1 / span 3;
    background: radial-gradient(circle at center, #056f38, #024323);
    font-weight: 700;
    color: #7bff9f;
  }

  .cell.number.red {
    background: radial-gradient(circle at center, #a02020, #4a0505);
  }

  .cell.number.black {
    background: radial-gradient(circle at center, #222, #000);
  }

  .cell.outside {
    background: radial-gradient(circle at center, #0a3611, #031808);
    font-size: 11px;
  }

  .cell:hover {
    box-shadow: 0 0 0 2px rgba(255,255,255,0.3) inset;
  }

  .chip-overlay {
    position: absolute;
    bottom: 2px;
    right: 4px;
    background: rgba(255,255,255,0.92);
    color: #111;
    border-radius: 999px;
    padding: 1px 4px;
    font-size: 10px;
    font-weight: 700;
  }

  .controls {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 14px;
    flex-wrap: wrap;
  }

  .btn {
    min-width: 100px;
    padding: 8px 16px;
    border-radius: 999px;
    border: none;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    color: #111;
    background: radial-gradient(circle at top, #f9d675, #d8a73e);
    box-shadow: 0 4px 0 #8a6220, 0 0 14px rgba(0, 0, 0, 0.6);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: transform 0.06s ease, box-shadow 0.06s ease, filter 0.15s ease;
  }

  .btn.secondary {
    background: radial-gradient(circle at top, #e7e7e7, #bfc2c6);
    box-shadow: 0 4px 0 #555b63, 0 0 14px rgba(0, 0, 0, 0.6);
  }

  .btn:disabled {
    opacity: 0.4;
    cursor: default;
  }

  .btn:hover:not(:disabled) {
    filter: brightness(1.04);
  }

  .btn:active:not(:disabled) {
    transform: translateY(2px);
    box-shadow: 0 2px 0 #8a6220, 0 0 10px rgba(0, 0, 0, 0.6);
  }

  .message {
    text-align: center;
    margin-top: 10px;
    min-height: 22px;
    font-weight: 600;
    font-size: 15px;
    letter-spacing: 0.4px;
  }

  .message.win { color: #ffe66d; }
  .message.lose { color: #ff9b9b; }
  .message.info { color: #c4e9ff; }

  footer {
    text-align: center;
    font-size: 11px;
    opacity: 0.75;
    margin-top: 8px;
  }

  @media (max-width: 960px) {
    .table {
      margin: 10px;
      padding: 14px;
    }
    .layout-wrapper {
      flex-direction: column;
      align-items: center;
    }
    .betting-layout {
      min-width: 0;
      width: 100%;
    }
  }
</style>
</head>
<body>
<div class="table">
  <header>
    <div class="bankroll">Bankroll: <span id="bankroll">$1000</span></div>
    <div class="center-info">Click layout to place bets. Single‑zero European roulette.</div>
    <div class="chip-select">
      <span>Chip:</span>
      <div class="chip active" data-value="1">$1</div>
      <div class="chip" data-value="5">$5</div>
      <div class="chip" data-value="25">$25</div>
      <div class="chip" data-value="100">$100</div>
    </div>
  </header>

  <div class="layout-wrapper">
    <div class="wheel-area">
      <div class="wheel">
        <div class="wheel-inner"></div>
        <div class="wheel-number-ring" id="wheelNumbers"></div>
        <div class="ball" id="ball"></div>
      </div>
      <div style="font-size:13px; opacity:0.9;">
        Last number: <span id="lastNumber">–</span>
      </div>
    </div>

    <div class="betting-layout">
      <div class="grid" id="layoutGrid"></div>
    </div>
  </div>

  <div class="controls">
    <button class="btn secondary" id="clearBtn">Clear Bets</button>
    <button class="btn" id="spinBtn">Spin</button>
  </div>

  <div class="message" id="message"></div>

  <footer>Standard payouts: straight 35:1, split 17:1, street 11:1, corner 8:1, dozen/column 2:1, even‑money 1:1.</footer>
</div>

<script>
  const wheelOrder = [
    0,
    32,15,19,4,21,2,25,17,34,6,
    27,13,36,11,30,8,23,10,5,24,
    16,33,1,20,14,31,9,22,18,29,
    7,28,12,35,3,26
  ];

  const bankrollSpan = document.getElementById("bankroll");
  const wheelNumbersDiv = document.getElementById("wheelNumbers");
  const ballDiv = document.getElementById("ball");
  const layoutGrid = document.getElementById("layoutGrid");
  const chips = document.querySelectorAll(".chip");
  const clearBtn = document.getElementById("clearBtn");
  const spinBtn = document.getElementById("spinBtn");
  const msgDiv = document.getElementById("message");
  const lastNumberSpan = document.getElementById("lastNumber");

  let bankroll = 1000;
  let selectedChip = 1;
  let bets = {};
  let spinning = false;
  let ballAngle = 0;
  let ballSpeed = 0;

  chips.forEach(chip => {
    chip.addEventListener("click", () => {
      chips.forEach(c => c.classList.remove("active"));
      chip.classList.add("active");
      selectedChip = parseInt(chip.dataset.value, 10);
    });
  });

  function setBankrollDisplay() {
    bankrollSpan.textContent = "$" + bankroll;
  }

  function setMessage(text, type="info") {
    msgDiv.className = "message " + type;
    msgDiv.textContent = text;
  }

  function createWheelNumbers() {
    const count = wheelOrder.length;
    wheelOrder.forEach((num, index) => {
      const el = document.createElement("div");
      el.className = "wheel-number";
      const angle = (index / count) * 360;
      el.style.transform = "rotate(" + angle + "deg)";
      el.style.top = "50%";
      el.style.left = "50%";

      if (num === 0) {
        el.classList.add("green");
      } else {
        const redNumbers = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];
        if (redNumbers.includes(num)) el.classList.add("red");
        else el.classList.add("black");
      }

      el.textContent = num;
      wheelNumbersDiv.appendChild(el);
    });
  }

  function createLayout() {
    const zeroCell = document.createElement("div");
    zeroCell.className = "cell zero";
    zeroCell.textContent = "0";
    zeroCell.dataset.betKey = "0";
    zeroCell.addEventListener("click", onCellClick);
    layoutGrid.appendChild(zeroCell);

    for (let row = 3; row >= 1; row--) {
      for (let col = 1; col <= 12; col++) {
        const num = col * 3 - (3 - row);
        const cell = document.createElement("div");
        cell.classList.add("cell", "number");

        const redNumbers = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];
        if (redNumbers.includes(num)) cell.classList.add("red");
        else cell.classList.add("black");

        cell.textContent = num;
        cell.dataset.betKey = "n_" + num;
        cell.addEventListener("click", onCellClick);
        layoutGrid.appendChild(cell);
      }
    }

    const labels = [
      { key:"2to1_1", label:"2 to 1" },
      { key:"2to1_2", label:"2 to 1" },
      { key:"2to1_3", label:"2 to 1" },
      { key:"1st12", label:"1st 12" },
      { key:"2nd12", label:"2nd 12" },
      { key:"3rd12", label:"3rd 12" },
      { key:"1to18", label:"1 to 18" },
      { key:"even", label:"Even" },
      { key:"red", label:"Red" },
      { key:"black", label:"Black" },
      { key:"odd", label:"Odd" },
      { key:"19to36", label:"19 to 36" }
    ];

    labels.forEach(l => {
      const cell = document.createElement("div");
      cell.className = "cell outside";
      cell.textContent = l.label;
      cell.dataset.betKey = l.key;
      cell.addEventListener("click", onCellClick);
      layoutGrid.appendChild(cell);
    });
  }

  function onCellClick(e) {
    if (spinning) return;
    const key = e.currentTarget.dataset.betKey;
    if (!bets[key]) bets[key] = 0;
    bets[key] += selectedChip;
    bankroll -= selectedChip;
    if (bankroll < 0) {
      bankroll += selectedChip;
      bets[key] -= selectedChip;
      return;
    }
    setBankrollDisplay();
    renderBetOverlays();
  }

  function renderBetOverlays() {
    document.querySelectorAll(".chip-overlay").forEach(el => el.remove());
    Object.entries(bets).forEach(([key, amount]) => {
      if (amount <= 0) return;
      const cell = document.querySelector('[data-bet-key="' + key + '"]');
      if (!cell) return;
      const overlay = document.createElement("div");
      overlay.className = "chip-overlay";
      overlay.textContent = "$" + amount;
      cell.appendChild(overlay);
    });
  }

  function clearBets() {
    if (spinning) return;
    Object.keys(bets).forEach(k => delete bets[k]);
    renderBetOverlays();
    setMessage("Bets cleared.");
  }

  function spin() {
    if (spinning) return;
    const totalBet = Object.values(bets).reduce((a,b)=>a+b,0);
    if (totalBet <= 0) {
      setMessage("Place a bet first.", "lose");
      return;
    }
    spinning = true;
    spinBtn.disabled = true;
    clearBtn.disabled = true;
    setMessage("Spinning...");
    ballSpeed = 12 + Math.random()*6;
    ballAngle = Math.random() * Math.PI * 2;

    const spinDuration = 4500 + Math.random()*1500;
    const start = performance.now();

    function animate(now) {
      const t = now - start;
      const progress = t / spinDuration;
      const ease = 1 - Math.pow(1 - Math.min(progress,1), 3);
      const speed = ballSpeed * (1 - ease);
      ballAngle += speed * 0.1;
      const radius = 100;
      const cx = 130;
      const cy = 130;
      const x = cx + Math.cos(ballAngle) * radius;
      const y = cy + Math.sin(ballAngle) * radius;
      ballDiv.style.left = (x - 6) + "px";
      ballDiv.style.top = (y - 6) + "px";

      if (progress < 1) {
        requestAnimationFrame(animate);
      } else {
        finishSpin();
      }
    }
    requestAnimationFrame(animate);
  }

  function finishSpin() {
    const totalSlots = wheelOrder.length;
    const normalizedAngle = ((ballAngle % (Math.PI*2)) + Math.PI*2) % (Math.PI*2);
    const slotIndex = Math.floor((normalizedAngle / (Math.PI*2)) * totalSlots);
    const winningNumber = wheelOrder[(totalSlots - slotIndex) % totalSlots];
    resolveBets(winningNumber);
  }

  function resolveBets(num) {
    lastNumberSpan.textContent = num;
    let winAmount = 0;

    const redSet = new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
    const blackSet = new Set([2,4,6,8,10,11,13,15,17,20,22,24,26,28,29,31,33,35]);

    for (const [key, amount] of Object.entries(bets)) {
      if (amount <= 0) continue;
      let multiplier = 0;

      if (key.startsWith("n_")) {
        const n = parseInt(key.split("_")[1],10);
        if (n === num) multiplier = 36;
      } else if (key === "0") {
        if (num === 0) multiplier = 36;
      } else if (key === "red" && redSet.has(num)) {
        multiplier = 2;
      } else if (key === "black" && blackSet.has(num)) {
        multiplier = 2;
      } else if (key === "odd" && num !== 0 && num % 2 === 1) {
        multiplier = 2;
      } else if (key === "even" && num !== 0 && num % 2 === 0) {
        multiplier = 2;
      } else if (key === "1to18" && num >=1 && num <=18) {
        multiplier = 2;
      } else if (key === "19to36" && num >=19 && num <=36) {
        multiplier = 2;
      } else if (key === "1st12" && num>=1 && num<=12) {
        multiplier = 3;
      } else if (key === "2nd12" && num>=13 && num<=24) {
        multiplier = 3;
      } else if (key === "3rd12" && num>=25 && num<=36) {
        multiplier = 3;
      } else if (key === "2to1_1") {
        if ([3,6,9,12,15,18,21,24,27,30,33,36].includes(num)) multiplier = 3;
      } else if (key === "2to1_2") {
        if ([2,5,8,11,14,17,20,23,26,29,32,35].includes(num)) multiplier = 3;
      } else if (key === "2to1_3") {
        if ([1,4,7,10,13,16,19,22,25,28,31,34].includes(num)) multiplier = 3;
      }

      if (multiplier > 0) {
        winAmount += amount * multiplier;
      }
    }

    bankroll += winAmount;
    setBankrollDisplay();

    const totalBet = Object.values(bets).reduce((a,b)=>a+b,0);
    if (winAmount > totalBet) {
      setMessage("Number " + num + ". You win $" + (winAmount - totalBet) + "!", "win");
    } else if (winAmount === totalBet) {
      setMessage("Number " + num + ". Push.", "info");
    } else {
      setMessage("Number " + num + ". You lose $" + (totalBet - winAmount) + ".", "lose");
    }

    bets = {};
    renderBetOverlays();
    spinning = false;
    spinBtn.disabled = false;
    clearBtn.disabled = false;
  }

  createWheelNumbers();
  createLayout();
  setBankrollDisplay();
  setMessage("Place your bets.");

  clearBtn.addEventListener("click", clearBets);
  spinBtn.addEventListener("click", spin);
</script>
</body>
</html>
