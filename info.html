<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Info</title>

<style>
  body {
    background: #0b1924;
    color: #fff;
    font-family: system-ui, sans-serif;
    text-align: center;
    padding: 40px;
  }

  .box {
    background: #0a5a2c;
    border: 6px solid #d4d4d4;
    border-radius: 20px;
    padding: 30px;
    width: 500px;
    margin: 0 auto;
    box-shadow: 0 0 25px rgba(0,0,0,0.6);
  }

  h1 {
    font-size: 42px;
    margin-bottom: 20px;
  }

  p, li {
    font-size: 22px;
    margin-top: 10px;
  }

  ul {
    list-style: none;
    padding: 0;
    margin-top: 20px;
  }

  /* Admin button */
  #adminBtn {
    margin-top: 30px;
    padding: 10px 25px;
    font-size: 18px;
    background: #f9d675;
    color: #111;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    box-shadow: 0 4px 0 #8a6220;
  }

  #adminBtn:active {
    transform: translateY(2px);
    box-shadow: 0 2px 0 #8a6220;
  }

  /* Reset panel */
  #resetPanel {
    margin-top: 25px;
    padding: 20px;
    background: #143d20;
    border: 3px solid #fff;
    border-radius: 12px;
    display: none;
  }

  #resetPanel button {
    padding: 12px 30px;
    font-size: 20px;
    background: #ff6666;
    color: #111;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    box-shadow: 0 4px 0 #993333;
  }

  #resetPanel button:active {
    transform: translateY(2px);
    box-shadow: 0 2px 0 #993333;
  }
</style>
</head>

<body>

<div class="box">
  <h1>Info Page</h1>

  <p id="countText">Loading...</p>

  <h2 style="margin-top:30px;">Top 3 Most Active Users Today</h2>
  <ul id="topUsers"></ul>

  <h2 style="margin-top:30px;">All Users</h2>
  <ul id="userList"></ul>

  <!-- ✅ Admin Login Button -->
  <button id="adminBtn" onclick="adminLogin()">Admin Login</button>

  <!-- ✅ Hidden Reset Panel -->
  <div id="resetPanel">
    <h3 style="margin-bottom:15px;">Admin Controls</h3>
    <button onclick="resetEverything()">Reset Everything</button>
  </div>
</div>

<script>
  /* ✅ Daily site opens */
  const siteCount = Number(localStorage.getItem("site_open_count")) || 0;
  document.getElementById("countText").textContent =
    "The site has been opened " + siteCount + " times today.";

  /* ✅ Load user activity */
  const activity = JSON.parse(localStorage.getItem("user_activity") || "{}");

  const sorted = Object.entries(activity)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 3);

  const topList = document.getElementById("topUsers");

  sorted.forEach(([name, count]) => {
    const li = document.createElement("li");
    li.textContent = `${name} — ${count} visits`;
    topList.appendChild(li);
  });

  /* ✅ Load all users */
  const users = JSON.parse(localStorage.getItem("users_list") || "[]");
  const list = document.getElementById("userList");

  users.forEach(name => {
    const li = document.createElement("li");
    li.textContent = name;
    list.appendChild(li);
  });

  /* ✅ Admin Login */
  function adminLogin() {
    const code = prompt("Enter admin code:");

    // ✅ Change this to whatever code you want
    const correctCode = "1234";

    if (code === correctCode) {
      document.getElementById("resetPanel").style.display = "block";
    } else {
      alert("Incorrect code.");
    }
  }

  /* ✅ Reset Everything */
  function resetEverything() {
    if (!confirm("Are you sure you want to reset ALL data?")) return;

    localStorage.setItem("site_open_count", 0);
    localStorage.setItem("users_list", JSON.stringify([]));
    localStorage.setItem("user_activity", JSON.stringify({}));

    alert("All data has been reset.");
    location.reload();
  }
</script>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

<script>
  // Your Firebase config goes here
  const firebaseConfig = {
    apiKey: "YOUR_KEY",
    authDomain: "YOUR_DOMAIN",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_BUCKET",
    messagingSenderId: "YOUR_SENDER",
    appId: "YOUR_APP_ID"
  };

  // Initialize Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
</script>
<script>
  db.collection("test").add({
    message: "Hello from GitHub Pages!"
  });
</script>

</body>
</html>


